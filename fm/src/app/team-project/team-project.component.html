<!-- Toast Notification -->
<div class="container mt-4">
  <!-- Project List Tab -->
  <div class="projectlist">
    <div class="pro">Project List</div>
  </div>
  <!-- Add Project Button -->
  <!-- <div class="card-body">
    <button type="button" (click)="openToast()" class="btn btn-primary" data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasForm" aria-controls="offcanvasForm">Add Project</button>
  </div> -->
</div>

<!-- Table to Display Project Data -->
<table class="project-table">
    <tr>
      <th>Project Name</th>
      <th>Client Name</th>
      <th>Domain</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
    {{submittedData | json}}
    <tr *ngFor="let item of submittedData">
      <td>{{ item.projectName }}</td>
      <td>{{ item.clientName }}</td>
      <td>{{ item.domain }}</td>
      <td>{{item.projectStatus}}</td>
      <td>
        <button class="edit-btn" (click)="edit(item.id)" class="alert alert-primary" role="alert"
         >Edit</button>
        <button class="delete-btn" (click)="delete(item.id,'Success', 'Project deleted successfully!')"
          class="alert alert-danger" role="alert">Delete</button>
      </td>
    </tr>
</table>



<!-- Add Project Form -->
<div class="offcanvas offcanvas-end" tabindex="-1" [ngClass]="{'show': showToast, 'hide': !showToast}" aria-labelledby="offcanvasFormLabel">
  <div class="offcanvas-header">
    {{isEditMode | json}}
    <h5 class="offcanvas-title" id="offcanvasFormLabel">{{ isEditMode ? 'Edit Project' : 'Add Project' }}</h5>
    <button type="button" class="btn-close" data-bs-target="#offcanvasForm" data-bs-dismiss="offcanvas"
      aria-label="Close" (click)="closeToast()"></button>

  </div>
  <div class="offcanvas-body">
    <form [formGroup]="projectForm"
      (ngSubmit)="isEditMode ? update() : onSubmit()">
      <!-- Project Name -->
      <div class="mb-3">
        <label for="projectName" class="form-label">Project Name</label>
        <input type="text" class="form-control" id="projectName" formControlName="projectName"
          [class.is-invalid]="projectForm.get('projectName')?.invalid && (projectForm.get('projectName')?.dirty || projectForm.get('projectName')?.touched)">
        <div
          *ngIf="projectForm.get('projectName')?.invalid && (projectForm.get('projectName')?.dirty || projectForm.get('projectName')?.touched)"
          class="invalid-feedback">
          <div *ngIf="projectForm.get('projectName')?.errors?.['required']">
            Project name is required.
          </div>
          <div *ngIf="projectForm.get('projectName')?.errors?.['minlength']">
            Project name must be at least 3 characters long.
          </div>
        </div>
      </div>

      <!-- Client Name -->
      <div class="mb-3">
        <label for="clientName" class="form-label">Client Name</label>
        <input type="text" class="form-control" id="clientName" formControlName="clientName"
          [class.is-invalid]="projectForm.get('clientName')?.invalid && (projectForm.get('clientName')?.dirty || projectForm.get('clientName')?.touched)">
        <div
          *ngIf="projectForm.get('clientName')?.invalid && (projectForm.get('clientName')?.dirty || projectForm.get('clientName')?.touched)"
          class="invalid-feedback">
          Client name is required.
        </div>
      </div>

      <!-- Domain -->
      <div class="mb-3">
        <label for="domain" class="form-label">Domain</label>
        <input type="text" class="form-control" id="domain" formControlName="domain"
          [class.is-invalid]="projectForm.get('domain')?.invalid && (projectForm.get('domain')?.dirty || projectForm.get('domain')?.touched)">
        <div
          *ngIf="projectForm.get('domain')?.invalid && (projectForm.get('domain')?.dirty || projectForm.get('domain')?.touched)"
          class="invalid-feedback">
          Domain name is required.
        </div>
      </div>

      <!-- Project Start Date -->
      <div class="mb-3">
        <label for="startDate" class="form-label">Project Start Date</label>
        <input type="date" class="form-control" id="startDate" formControlName="startDate"
          [class.is-invalid]="projectForm.get('startDate')?.invalid && (projectForm.get('startDate')?.dirty || projectForm.get('startDate')?.touched)">
        <div
          *ngIf="projectForm.get('startDate')?.invalid && (projectForm.get('startDate')?.dirty || projectForm.get('startDate')?.touched)"
          class="invalid-feedback">
          Project start date is required.
        </div>
      </div>

      <!-- Voice -->
      <div class="mb-3">
        <label for="voice" class="form-label">Voice</label>
        <input type="text" class="form-control" id="voice" formControlName="voice"
          [class.is-invalid]="projectForm.get('voice')?.invalid && (projectForm.get('voice')?.dirty || projectForm.get('voice')?.touched)">
        <div
          *ngIf="projectForm.get('voice')?.invalid && (projectForm.get('voice')?.dirty || projectForm.get('voice')?.touched)"
          class="invalid-feedback">
          <div *ngIf="projectForm.get('voice')?.errors?.['maxlength']">
            Voice must be less than 100 characters.
          </div>
        </div>
      </div>

      <!-- Voice Start Date -->
      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="voiceStartDate" class="form-label">Voice Start Date</label>
            <input type="date" class="form-control" id="voiceStartDate" formControlName="voiceStartDate"
              [class.is-invalid]="projectForm.get('voiceStartDate')?.invalid && (projectForm.get('voiceStartDate')?.dirty || projectForm.get('voiceStartDate')?.touched)">
            <div
              *ngIf="projectForm.get('voiceStartDate')?.invalid && (projectForm.get('voiceStartDate')?.dirty || projectForm.get('voiceStartDate')?.touched)"
              class="invalid-feedback">
              Please provide a valid Voice Start Date.
            </div>
          </div>
        </div>

        <!-- Voice End Date -->
        <div class="col-md-6">
          <div class="mb-3">
            <label for="voiceEndDate" class="form-label">Voice End Date</label>
            <input type="date" class="form-control" id="voiceEndDate" formControlName="voiceEndDate">
            <div
              *ngIf="projectForm.get('voiceEndDate')?.invalid && (projectForm.get('voiceEndDate')?.dirty || projectForm.get('voiceEndDate')?.touched)"
              class="invalid-feedback">
              Please provide a valid Voice End Date.
            </div>
          </div>
        </div>
      </div>

      <!-- Coding -->
      <div class="mb-3">
        <label for="coding" class="form-label">Coding</label>
        <input type="text" class="form-control" id="coding" formControlName="coding"
          [class.is-invalid]="projectForm.get('coding')?.invalid && (projectForm.get('coding')?.dirty || projectForm.get('coding')?.touched)">
        <div
          *ngIf="projectForm.get('coding')?.invalid && (projectForm.get('coding')?.dirty || projectForm.get('coding')?.touched)"
          class="invalid-feedback">
          <div *ngIf="projectForm.get('coding')?.errors?.['maxlength']">
            Coding must be less than 100 characters.
          </div>
        </div>
      </div>

      <!-- Coding Start Date -->
      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="codingStartDate" class="form-label">Coding Start Date</label>
            <input type="date" class="form-control" id="codingStartDate" formControlName="codingStartDate"
              [class.is-invalid]="projectForm.get('codingStartDate')?.invalid && (projectForm.get('codingStartDate')?.dirty || projectForm.get('codingStartDate')?.touched)">
            <div
              *ngIf="projectForm.get('codingStartDate')?.invalid && (projectForm.get('codingStartDate')?.dirty || projectForm.get('codingStartDate')?.touched)"
              class="invalid-feedback">
              Please provide a valid Coding Start Date.
            </div>
          </div>
        </div>

        <!-- Coding End Date -->
        <div class="col-md-6">
          <div class="mb-3">
            <label for="codingEndDate" class="form-label">Coding End Date</label>
            <input type="date" class="form-control" id="codingEndDate" formControlName="codingEndDate">
            <div
              *ngIf="projectForm.get('codingEndDate')?.invalid && (projectForm.get('codingEndDate')?.dirty || projectForm.get('codingEndDate')?.touched)"
              class="invalid-feedback">
              Please provide a valid Coding End Date.
            </div>
          </div>
        </div>
      </div>

      <!-- Asset -->
      <div class="mb-3 ">
        <label class="form-label">Asset</label>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="laptop" value="laptop" formControlName="asset1"
            (change)="onCheckboxChange($event)" />
          <label class="form-check-label" for="laptop">Laptop</label>
        </div>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="charger" value="charger" formControlName="asset2"
            (change)="onCheckboxChange($event)" />
          <label class="form-check-label" for="charger">Charger</label>
        </div>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="headset" value="headset" formControlName="asset3"
            (change)="onCheckboxChange($event)">
          <label class="form-check-label" for="headset">Headset</label>
        </div>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="mouse" value="mouse" formControlName="asset4"
            (change)="onCheckboxChange($event)">
          <label class="form-check-label" for="mouse">Mouse</label>
        </div>
      </div>
      <div class="mb-3">
        <label for="projectStatus" class="form-label">Project Status</label>
        <select class="form-select" id="projectStatus" formControlName="projectStatus">
          <option value="">--Select Status--</option>
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
          <option value="Pending">Pending</option>
        </select>
        <div
          *ngIf="projectForm.get('projectStatus')?.invalid && (projectForm.get('projectStatus')?.dirty || projectForm.get('projectStatus')?.touched)"
          class="invalid-feedback">
          Project status is required.
        </div>
      </div>
      <!-- Submit and Cancel Buttons -->
      <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-primary me-2" [disabled]="!projectForm.valid || isEditMode">Submit</button>
        <button type="button" class="btn btn-secondary" (click)="update()"
          [disabled]="!projectForm.valid || !isEditMode">Update</button>
      </div>
    </form>
  </div>
</div>