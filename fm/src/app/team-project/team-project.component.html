<!-- Header -->
<div class="container mt-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Project List</h4>
    <button class="btn btn-primary" (click)="openForm()">Add Project</button>
  </div>

  <!-- Table -->
  <table class="project-table">
    <thead>
      <tr>
        <th>Project Holder</th>
        <th>Project Voice</th>
        <th>Project ID</th>
        <th>Vendor</th>
        <th>Client</th>
        <th>Parent Company</th>
        <th>Onboarded Date</th>
        <th>Domain</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let p of projects">
        <td>{{ p.projectHolderName }}</td>
        <td>{{ p.projectVoiceName }}</td>
        <td>{{ p.projectId }}</td>
        <td>{{ p.vendor }}</td>
        <td>{{ p.clientName }}</td>
        <td>{{ p.parentCompany }}</td>
        <td>{{ p.onboardedDate }}</td>
        <td>{{ p.projectDomain }}</td>
        <td>{{ p.projectStatus }}</td>
        <td>
      <button class="btn btn-link p-0" (click)="toggleDropdown(p)">
            <i class="bi bi-three-dots-vertical"></i>
          </button>
<div *ngIf="selectedProject === p" class="dropdown-card">
            <button (click)="deleteProject(p.id)">Delete</button>
          </div>        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Offcanvas -->
<div class="offcanvas offcanvas-end"
     [class.show]="showForm"
     [style.visibility]="showForm ? 'visible' : 'hidden'">

  <div class="offcanvas-header">
    <h5>Add Project</h5>
    <button class="btn-close" (click)="closeForm()"></button>
  </div>

  <div class="offcanvas-body">
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">

      <!-- Project Holder -->
      <div class="mb-3 position-relative">
        <label>Project Holder</label>
        <input class="form-control"
               [value]="projectHolderInput"
               (input)="onEmployeeInput('holder', $any($event.target).value)">
        <ul *ngIf="employeeResults.length && activeField === 'holder'"
            class="list-group position-absolute w-100">
          <li class="list-group-item"
              *ngFor="let emp of employeeResults"
              (click)="selectEmployee(emp)">
            {{ emp.employeeName }}
          </li>
        </ul>
      </div>

      <!-- Project Voice -->
      <div class="mb-3 position-relative">
        <label>Project Voice</label>
        <input class="form-control"
               [value]="projectVoiceInput"
               (input)="onEmployeeInput('voice', $any($event.target).value)">
        <ul *ngIf="employeeResults.length && activeField === 'voice'"
            class="list-group position-absolute w-100">
          <li class="list-group-item"
              *ngFor="let emp of employeeResults"
              (click)="selectEmployee(emp)">
            {{ emp.employeeName }}
          </li>
        </ul>
      </div>

      <input class="form-control mb-2" placeholder="Project Name" formControlName="projectName">
      <input class="form-control mb-2" placeholder="Vendor" formControlName="vendor">
      <input class="form-control mb-2" placeholder="Client Name" formControlName="clientName">
      <input class="form-control mb-2" placeholder="Parent Company" formControlName="parentCompany">
      <input class="form-control mb-2" type="date" formControlName="onboardedDate">
      <input class="form-control mb-2" placeholder="Domain" formControlName="projectDomain">

      <select class="form-select mb-3" formControlName="projectStatus">
        <option value="ACTIVE">Active</option>
        <option value="INACTIVE">Inactive</option>
      </select>

      <button class="btn btn-success w-100" [disabled]="projectForm.invalid">
        Submit
      </button>
    </form>
  </div>
</div>
